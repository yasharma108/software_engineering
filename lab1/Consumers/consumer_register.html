<!DOCTYPE html>
<html>
<head>
    <title>Consumer Registration</title>
    <link rel="stylesheet" href="style.css">
    <style>
        label, input, select, textarea {
            display: block;
            margin: 8px 0;
        }
    </style>
</head>
<body>
<h2>Consumer Registration</h2>

<form action="./consumer_register.php" method="post">
    <fieldset>
        <legend>Fill Your Details</legend>

        <label>Name:</label>
        <input type="text" name="name" required
               pattern="[A-Za-z ]{3,32}" title="3 to 32 letters and spaces only">

        <label>Mobile:</label>
        <input type="text" name="mobile" required
               pattern="\d{10}" title="Exactly 10 digits">
               
               <label>Category:</label>
        <select name="category" id="category" required>
            <option value="">Select</option>
            <option value="Domestic">Domestic</option>
            <option value="Industrial">Industrial</option>
            <option value="Commercial">Commercial</option>
        </select>

        <div id="iidField" style="display:none;">
            <label>Industrial ID (IID):</label>
            <input type="text" name="IID">
        </div>

        <div id="cidField" style="display:none;">
            <label>Commercial ID (CID):</label>
            <input type="text" name="CID">

        </div>      
        <label>Address:</label>
        <textarea name="address" required></textarea>

        

        <label>Password:</label>
        <input type="password" name="password" required>

        <input type="submit" name="register" value="Register">
    </fieldset>
</form>

<script>
    const category = document.getElementById('category');
    const iidField = document.getElementById('iidField');
    const cidField = document.getElementById('cidField');

    category.addEventListener('change', function () {

        // Hide both first
        iidField.style.display = 'none';
        cidField.style.display = 'none';

        // Remove required flags
        iidField.querySelector('input').required = false;
        cidField.querySelector('input').required = false;

        if (this.value === 'Industrial') {
            iidField.style.display = 'block';
            iidField.querySelector('input').required = true;
        }
        else if (this.value === 'Commercial') {
            cidField.style.display = 'block';
            cidField.querySelector('input').required = true;
        }
    });
</script>

</body>
</html>
